function oddizeRows(){document.querySelectorAll("#attrs-data li").forEach(function(a,b){a.classList.remove("even"),0==b%2&&a.classList.add("even")})}function loadAttributeList(){var a="/api/getAttributeByGroup.php",b=document.getElementById("sets-select").value,c=document.getElementById("group-select").value;return null==b||""==b||null==c||""==c?void alert("impossibile caricare la lista: errore nel leggere i valori di set e group"):void(a+="?setid="+b+"&groupid="+c,fetch(a).then(a=>a.json()).then(a=>{document.getElementById("attribute-list").innerHTML=a.html;var b=document.getElementById("attrs-data"),c=Sortable.create(b,{onEnd:function(){oddizeRows()}});document.querySelectorAll(".remove-attr").forEach(function(a){a.addEventListener("click",function(){document.querySelector("#remove-attribute-form [name=setid]").value=document.getElementById("sets-select").value,document.querySelector("#remove-attribute-form [name=groupid]").value=document.getElementById("group-select").value,document.querySelector("[name=remove_attribute_entity_id]").value=this.getAttribute("data-attentid"),document.querySelector("#remove-attribute-form").submit()})})}))}window.onload=function(){function a(a,b){return b.filter(b=>{const c=new RegExp(a,"gi");if(null!=b.label)return b.label.match(c)})}function b(){const b=a(this.value,e),c=document.querySelector("#suggestion"),d=b.map(a=>{var b=a.id,c=a.label,d=a.value;return"<div class=\"attribute-option\" value=\""+b+"\">"+c+"</div>"}).join("");c.style.display=0<d.length?"block":"none",c.innerHTML=d,document.querySelectorAll(".attribute-option").forEach(function(a){a.addEventListener("click",function(){var a=this.getAttribute("value"),b=this.innerHTML;document.querySelector("#attribute-id").value=a,document.querySelector("#attribute-input").value=b,setTimeout(function(){document.querySelector("#suggestion").style.display="none"},200)})})}var c=document.getElementById("sets-select");c.addEventListener("change",function(){var a=this.value;document.querySelectorAll(".group-opt").forEach(function(b){b.style.display="block",b.getAttribute("data-setid")!=a&&(b.style.display="none")}),document.getElementById("group-select").removeAttribute("disabled")}),""!=document.getElementById("sets-select").value&&document.getElementById("group-select").removeAttribute("disabled"),document.getElementById("save-list-button").addEventListener("click",function(){document.querySelectorAll(".posholder").forEach(function(a,b){a.value=b+1}),document.querySelector("#save-list-form [name=setid]").value=document.getElementById("sets-select").value,document.querySelector("#save-list-form [name=groupid]").value=document.getElementById("group-select").value}),document.getElementById("submit-button").addEventListener("click",function(a){return""==document.getElementById("attribute-id").value?(alert("Attributo non valido"),a.preventDefault(),!1):""==document.getElementById("sets-select").value?(alert("Set non valido"),a.preventDefault(),!1):""==document.getElementById("group-select").value?(alert("Gruppo non valido"),a.preventDefault(),!1):void(document.querySelector("#add-attribute-form [name=set_id]").value=document.getElementById("sets-select").value,document.querySelector("#add-attribute-form [name=group_id]").value=document.getElementById("group-select").value)});const d=document.querySelector("#group-select");d.addEventListener("change",loadAttributeList);const e=[];fetch("/api/getAttributesAPI.php").then(a=>a.json()).then(a=>e.push(...a));const f=document.querySelector("#attribute-input"),g=document.querySelector("#suggestion");f.addEventListener("change",b),f.addEventListener("keyup",b),window.addEventListener("click",function(a){""!=a.target.id&&(document.querySelector("#suggestion").style.display="none")})};

